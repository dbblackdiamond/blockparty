<!doctype html>
<html>
{{template "head" .}}
    <body>
	{{template "navbar" .}}
	<div class="container-fluid">
		<h2 class="text-center" id="title">My Mortgages</h2>
		<div id="mortgageTable">
			<table class="table table-striped">
			<thead>
				<tr>
				<th>House Id</th>
				<th>Amount</th>
				<th>Lender</th>
				<th>Inspection</th>
				<th>Status</th>
				</tr>
			</thead>
			<tbody id="tableData">
			{{$houses:= .Houses}}
			{{range .Mortgages}}
				<tr onClick="showMyMortgage('{{.HouseId}}');">
					<td><a>{{.HouseId}}</a></td>
					<td>$<script>document.write(({{.Amount}}).toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g, '$1,')); </script></td>
					<td><a>{{.Lender}}</a></td>
					<td>
					{{$houseId:=.HouseId}}
						{{range $houses}}
							{{if eq	.Id $houseId}}
								{{.InspectionDate}}
							{{end}}
						{{end}}
					</td>
					<td>{{.Status}}</td>
			{{end}}
				</tr>
			</tbody>
			</table>
		</div>
	</div>
    </body>
    <script>
	function showMyMortgage(houseId) {
		window.location={{.Url}} + "/house/" + houseId + "/mortgage";
	}
    </script>
</html>
