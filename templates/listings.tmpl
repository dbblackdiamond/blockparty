<!doctype html>
<html>
    <head>
    <link href="css/bootstrap.min.css" rel="stylesheet"/>
    <link href="css/blockparty.css" rel="stylesheet"/>
    <script type="text/javascript" src="js/web3.js"></script>
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script type="text/javascript" src="js/bootstrap.min.js"></script>
    <script type="text/javascript" src="js/d3.min.js"></script>
    <script type="text/javascript" src="js/blockparty.js"></script>
    <title>BlockParty</title>
    <script language="javascript">
	function initialize() {
	var houses={{.Data}};

	var listings=d3.select("#houses").selectAll("div").data(houses);

	houseDiv=listings.enter()
		.append("div")
			.attr("class","col-md-3")
			.append("div")
				.attr("class","panel panel-primary");


	houseDiv
		.append("div")
		.attr("class","panel-heading")
		.append("h3")
			.attr("class","panel-title")
			.text(function(d){return d.name;});

	var houseDivContent= houseDiv.append("div")
		.attr("class","panel-body");

	houseDivContent
		.append("img")
		.attr("src", function(d){return "images/" + d.image;})
		.attr("class","houseImage center-block");
	
	houseDivContent
		.append("div")
		.attr("class","text-center")
		.text(function(d){return d.price;});

	houseDivContent
		.append("div")
			.append("input")
				.attr("type","button")
				.attr("class","btn btn-primary center-block")
				.attr("value","Bid")
				.attr("onClick",function(d){return "bidOnHouse('"+d.contract+"');"});
	listings.exit().remove();
	}

    function bidOnHouse(contract) {
	    alert("Bidding on contract " + contract + ".");
    }
    </script>
    </head>
    <body>
	<nav class="navbar navbar-inverse">
		<div class="container-fluid">
			<div class="navbar-header">
				<a class="navbar-brand" href="#"><span class="glyphicon glyphicon-home"></span> BlockParty</a>
			</div>
		  </div>
	</nav>	    
	<img alt="Pathfinder Logo" class="center-block" src="images/Pathfinder-Logo.png"/>
	<div id="listings" class="container-fluid">
		<div id="houses" class="row"></div>
	</div>
    </body>
    <script language="javascript">
	initialize();
    </script>
</html>
